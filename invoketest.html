<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
        }

        .container {
            width: 100%;
            padding: 15px;
        }

        @media screen and (min-width: 700px) {
            .container {
                width: 70%;
                margin: auto;
            }
        }

        p {
            white-space: pre-wrap; 
            word-wrap: break-word; 
            overflow-wrap: break-word; 
        }

        .bold-and-larger {
            font-weight: bold; 
            font-size: 1.5em; 
        }

        .larger {
            font-weight: bold; 
            font-size: 1.2em; 
        }

        .execution-log {
            margin-top: 15px;
            padding: 10px;
            border-top: 1px solid #eee;
        }

        .execution-item {
            color: #333;
            margin: 5px 0;
            padding: 5px;
            background-color: #f9f9f9;
            border-radius: 3px;
        }

    </style>
    <title>InvokeTest Page</title>

</head>

<body>
    <h1>InvokeTest Page</h1>

    <p>!!! This is just a demo page, NO Sensitive Data will be stored!!!</p>

    <p> Click the button to trigger all captured potential sensitive interface invocations. </p>

    <!-- Display total number of invocations -->
    <p><span class="larger">Total invocations to execute: <span id="totalInvocations">0</span></span></p>

    <p><span class="larger">Trigger</span></p>
    <input type="button" value="Trigger" id="Trigger" style="font-size: 20px; padding: 20px 25px;"/>

    <!-- Execution log container -->
    <div class="execution-log" id="executionLog"></div>

    <br><br><br>

    <script>
        function setupWebViewJavascriptBridge(callback) {
            if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
            if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
            window.WVJBCallbacks = [callback];
            var WVJBIframe = document.createElement('iframe');
            WVJBIframe.style.display = 'none';
            WVJBIframe.src = 'https://__bridge_loaded__';
            document.documentElement.appendChild(WVJBIframe);
            setTimeout(function () { document.documentElement.removeChild(WVJBIframe) }, 0)
        }

        function sendIframeMsg(url) {
            var iframe = document.createElement("iframe");
            iframe.style.cssText = "display:none;width:0px;height:0px;";
            iframe.src = url;
            document.body.appendChild(iframe);
        }

        //<script src="https://cdn.jsdelivr.net/npm/dsbridge@3.1.4/dist/dsbridge.js"> 
        var bridge = {
        default:
            this,
            call: function(b, a, c) {
                var e = "";
                "function" == typeof a && (c = a, a = {});
                a = {
                    data: void 0 === a ? null: a
                };
                if ("function" == typeof c) {
                    var g = "dscb" + window.dscb++;
                    window[g] = c;
                    a._dscbstub = g
                }
                a = JSON.stringify(a);
                if (window._dsbridge) e = _dsbridge.call(b, a);
                else if (window._dswk || -1 != navigator.userAgent.indexOf("_dsbridge")) e = prompt("_dsbridge=" + b, a);
                return JSON.parse(e || "{}").data
            },
            register: function(b, a, c) {
                c = c ? window._dsaf: window._dsf;
                window._dsInit || (window._dsInit = !0, setTimeout(function() {
                    bridge.call("_dsb.dsinit")
                },
                0));
                "object" == typeof a ? c._obs[b] = a: c[b] = a
            },
            registerAsyn: function(b, a) {
                this.register(b, a, !0)
            },
            hasNativeMethod: function(b, a) {
                return this.call("_dsb.hasNativeMethod", {
                    name: b,
                    type: a || "all"
                })
            },
            disableJavascriptDialogBlock: function(b) {
                this.call("_dsb.disableJavascriptDialogBlock", {
                    disable: !1 !== b
                })
            }
        }; !
        function() {
            if (!window._dsf) {
                var b = {
                    _dsf: {
                        _obs: {}
                    },
                    _dsaf: {
                        _obs: {}
                    },
                    dscb: 0,
                    dsBridge: bridge,
                    close: function() {
                        bridge.call("_dsb.closePage")
                    },
                    _handleMessageFromNative: function(a) {
                        var e = JSON.parse(a.data),
                        b = {
                            id: a.callbackId,
                            complete: !0
                        },
                        c = this._dsf[a.method],
                        d = this._dsaf[a.method],
                        h = function(a, c) {
                            b.data = a.apply(c, e);
                            bridge.call("_dsb.returnValue", b)
                        },
                        k = function(a, c) {
                            e.push(function(a, c) {
                                b.data = a;
                                b.complete = !1 !== c;
                                bridge.call("_dsb.returnValue", b)
                            });
                            a.apply(c, e)
                        };
                        if (c) h(c, this._dsf);
                        else if (d) k(d, this._dsaf);
                        else if (c = a.method.split("."), !(2 > c.length)) {
                            a = c.pop();
                            var c = c.join("."),
                            d = this._dsf._obs,
                            d = d[c] || {},
                            f = d[a];
                            f && "function" == typeof f ? h(f, d) : (d = this._dsaf._obs, d = d[c] || {},
                            (f = d[a]) && "function" == typeof f && k(f, d))
                        }
                    }
                },
                a;
                for (a in b) window[a] = b[a];
                bridge.register("_hasJavascriptMethod",
                function(a, b) {
                    b = a.split(".");
                    if (2 > b.length) return ! (!_dsf[b] && !_dsaf[b]);
                    a = b.pop();
                    b = b.join(".");
                    return (b = _dsf._obs[b] || _dsaf._obs[b]) && !!b[a]
                })
            }
        } ();
        function mycallback(e){
            console.log("[attacker]: " + JSON.stringify(e));
        }
        function printObject(name, value){
            setTimeout(function () { 
                console.log(name + ": " + JSON.stringify(value)); 
            }, 500);
        }

        // Send Finish signal to notify python script
        async function sendFinishSignal() {            
            try {
                // Send request to PHP backend
                const response = await fetch('signal_writer.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        filename: 'invokefinish.txt',
                        content: 'invokefinish'
                    })
                });

                const result = await response.json();

                if (response.ok && result.success) {
                    var suc = true;
                } else {
                    var suc = true;
                }
            } catch (error) {
                var suc = true;
            }
        }
        

        // Define invocation array with type information
        const ocCalls = [
            // Invocation 1: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    // ==============================================

                    // Auto-generated InvokCode.js

                    function setupWebViewJavascriptBridge(callback) {
                        if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
                        if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
                        window.WVJBCallbacks = [callback];
                        var WVJBIframe = document.createElement('iframe');
                        WVJBIframe.style.display = 'none';
                        WVJBIframe.src = 'https://__bridge_loaded__';
                        document.documentElement.appendChild(WVJBIframe);
                        setTimeout(function () { document.documentElement.removeChild(WVJBIframe) }, 0)
                    }

                    function sendIframeMsg(url) {
                        var iframe = document.createElement("iframe");
                        iframe.style.cssText = "display:none;width:0px;height:0px;";
                        iframe.src = url;
                        document.body.appendChild(iframe);
                    }

                    //<script src="https://cdn.jsdelivr.net/npm/dsbridge@3.1.4/dist/dsbridge.js"> 
                    var bridge = {
                    default:
                        this,
                        call: function(b, a, c) {
                            var e = "";
                            "function" == typeof a && (c = a, a = {});
                            a = {
                                data: void 0 === a ? null: a
                            };
                            if ("function" == typeof c) {
                                var g = "dscb" + window.dscb++;
                                window[g] = c;
                                a._dscbstub = g
                            }
                            a = JSON.stringify(a);
                            if (window._dsbridge) e = _dsbridge.call(b, a);
                            else if (window._dswk || -1 != navigator.userAgent.indexOf("_dsbridge")) e = prompt("_dsbridge=" + b, a);
                            return JSON.parse(e || "{}").data
                        },
                        register: function(b, a, c) {
                            c = c ? window._dsaf: window._dsf;
                            window._dsInit || (window._dsInit = !0, setTimeout(function() {
                                bridge.call("_dsb.dsinit")
                            },
                            0));
                            "object" == typeof a ? c._obs[b] = a: c[b] = a
                        },
                        registerAsyn: function(b, a) {
                            this.register(b, a, !0)
                        },
                        hasNativeMethod: function(b, a) {
                            return this.call("_dsb.hasNativeMethod", {
                                name: b,
                                type: a || "all"
                            })
                        },
                        disableJavascriptDialogBlock: function(b) {
                            this.call("_dsb.disableJavascriptDialogBlock", {
                                disable: !1 !== b
                            })
                        }
                    }; !
                    function() {
                        if (!window._dsf) {
                            var b = {
                                _dsf: {
                                    _obs: {}
                                },
                                _dsaf: {
                                    _obs: {}
                                },
                                dscb: 0,
                                dsBridge: bridge,
                                close: function() {
                                    bridge.call("_dsb.closePage")
                                },
                                _handleMessageFromNative: function(a) {
                                    var e = JSON.parse(a.data),
                                    b = {
                                        id: a.callbackId,
                                        complete: !0
                                    },
                                    c = this._dsf[a.method],
                                    d = this._dsaf[a.method],
                                    h = function(a, c) {
                                        b.data = a.apply(c, e);
                                        bridge.call("_dsb.returnValue", b)
                                    },
                                    k = function(a, c) {
                                        e.push(function(a, c) {
                                            b.data = a;
                                            b.complete = !1 !== c;
                                            bridge.call("_dsb.returnValue", b)
                                        });
                                        a.apply(c, e)
                                    };
                                    if (c) h(c, this._dsf);
                                    else if (d) k(d, this._dsaf);
                                    else if (c = a.method.split("."), !(2 > c.length)) {
                                        a = c.pop();
                                        var c = c.join("."),
                                        d = this._dsf._obs,
                                        d = d[c] || {},
                                        f = d[a];
                                        f && "function" == typeof f ? h(f, d) : (d = this._dsaf._obs, d = d[c] || {},
                                        (f = d[a]) && "function" == typeof f && k(f, d))
                                    }
                                }
                            },
                            a;
                            for (a in b) window[a] = b[a];
                            bridge.register("_hasJavascriptMethod",
                            function(a, b) {
                                b = a.split(".");
                                if (2 > b.length) return ! (!_dsf[b] && !_dsaf[b]);
                                a = b.pop();
                                b = b.join(".");
                                return (b = _dsf._obs[b] || _dsaf._obs[b]) && !!b[a]
                            })
                        }
                    } ();

                    function mycallback(e){
                        console.log("[attacker]: " + JSON.stringify(e));
                    }

                    function printObject(name, value){
                        setTimeout(function () { 
                            console.log(name + ": " + JSON.stringify(value)); 
                        }, 500);
                    }

                    // Generated from log-jsoccomm.txt
                }
            },
            // Invocation 2: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app/printLog?query=%7B%22tag%22%3A%22%E7%A6%8F%E5%88%A9%E4%B8%AD%E5%BF%83%5BBROWSER_INFO%5D%22%2C%22value%22%3A%22%3C%3C%3C%3C%3C%3C%5Cn%E3%80%90netType%E3%80%91%5Cn3%5Cn%E3%80%90url%E3%80%91%5Cnhttps%3A%2F%2Fh5.if.qidian.com%2Fnew%2FwelfareCenter%2F%3F_viewmode%3D0%5Cn%E3%80%90userAgent%E3%80%91%5CnMozilla%2F5.0%20(iPhone%3B%20CPU%20iPhone%20OS%2014_4_2%20like%20Mac%20OS%20X)%20AppleWebKit%2F605.1.15%20(KHTML%2C%20like%20Gecko)%20Mobile%2FQDReaderiOS%2F5.9.384%2F658%2FQDReaderAppstore%2FQDNightStyle_1%2FQDShowNativeLoading%5Cn%3E%3E%3E%3E%3E%3E%22%2C%22level%22%3A2%7D');
                }
            },
            // Invocation 3: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app/printLog?query=%7B%22tag%22%3A%22%E5%91%A8%E8%BE%B9%E5%95%86%E5%9F%8E%5BBROWSER_INFO%5D%22%2C%22value%22%3A%22%3C%3C%3C%3C%3C%3C%5Cn%E3%80%90netType%E3%80%91%5Cn3%5Cn%E3%80%90url%E3%80%91%5Cnhttps%3A%2F%2Fh5.if.qidian.com%2Fnew%2Fcash-store%2Fhome%2F%3F_viewmode%3D0%5Cn%E3%80%90userAgent%E3%80%91%5CnMozilla%2F5.0%20(iPhone%3B%20CPU%20iPhone%20OS%2014_4_2%20like%20Mac%20OS%20X)%20AppleWebKit%2F605.1.15%20(KHTML%2C%20like%20Gecko)%20Mobile%2FQDReaderiOS%2F5.9.384%2F658%2FQDReaderAppstore%2FQDNightStyle_1%2FQDShowNativeLoading%5Cn%3E%3E%3E%3E%3E%3E%22%2C%22level%22%3A2%7D');
                }
            },
            // Invocation 4: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app/printLog?query=%7B%22tag%22%3A%22%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%5BBROWSER_INFO%5D%22%2C%22value%22%3A%22%3C%3C%3C%3C%3C%3C%5Cn%E3%80%90netType%E3%80%91%5Cn3%5Cn%E3%80%90url%E3%80%91%5Cnhttps%3A%2F%2Fh5.if.qidian.com%2Fnew%2Fcash-store%2Fdetail%2F%3F_viewmode%3D0%26spuId%3D1234545534716215296%5Cn%E3%80%90userAgent%E3%80%91%5CnMozilla%2F5.0%20(iPhone%3B%20CPU%20iPhone%20OS%2014_4_2%20like%20Mac%20OS%20X)%20AppleWebKit%2F605.1.15%20(KHTML%2C%20like%20Gecko)%20Mobile%2FQDReaderiOS%2F5.9.384%2F658%2FQDReaderAppstore%2FQDNightStyle_1%2FQDShowNativeLoading%5Cn%3E%3E%3E%3E%3E%3E%22%2C%22level%22%3A2%7D');
                }
            },
            // Invocation 5: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10010/riskControlInfo');
                }
            },
            // Invocation 6: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10011/riskControlInfo');
                }
            },
            // Invocation 7: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10012/riskControlInfo');
                }
            },
            // Invocation 8: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10013/riskControlInfo');
                }
            },
            // Invocation 9: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10005/riskControlInfo');
                }
            },
            // Invocation 10: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10006/riskControlInfo');
                }
            },
            // Invocation 11: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10007/riskControlInfo');
                }
            },
            // Invocation 12: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10008/riskControlInfo');
                }
            },
            // Invocation 13: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10009/riskControlInfo');
                }
            },
            // Invocation 14: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10003/isLogin');
                }
            },
            // Invocation 15: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('qdreader://app/showWebViewLoading');
                }
            },
            // Invocation 16: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10005/checkThemeMode');
                }
            },
            // Invocation 17: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('qdreader://app/hiddenWebViewLoading');
                }
            },
            // Invocation 18: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10002/checkThemeMode');
                }
            },
            // Invocation 19: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10007/checkThemeMode');
                }
            },
            // Invocation 20: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10001/checkThemeMode');
                }
            },
            // Invocation 21: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10001/networkEnvironment');
                }
            },
            // Invocation 22: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10020/networkEnvironment');
                }
            },
            // Invocation 23: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10002/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 24: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10003/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 25: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10004/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 26: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10006/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 27: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10007/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 28: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10008/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 29: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10009/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 30: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10014/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 31: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10016/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 32: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10018/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 33: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10005/encryptSign?query=%7B%22params%22%3A%7B%7D%7D');
                }
            },
            // Invocation 34: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10006/encryptSign?query=%7B%22params%22%3A%7B%22pg%22%3A1%7D%7D');
                }
            },
            // Invocation 35: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10007/encryptSign?query=%7B%22params%22%3A%7B%22pg%22%3A2%7D%7D');
                }
            },
            // Invocation 36: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10008/encryptSign?query=%7B%22params%22%3A%7B%22pg%22%3A2%7D%7D');
                }
            },
            // Invocation 37: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10017/encryptSign?query=%7B%22params%22%3A%7B%22positions%22%3A%22ioscheckin%22%7D%7D');
                }
            },
            // Invocation 38: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10006/encryptSign?query=%7B%22params%22%3A%7B%22spuId%22%3A%221234545534716215296%22%7D%7D');
                }
            },
            // Invocation 39: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10005/encryptSign?query=%7B%22params%22%3A%7B%22categoryId%22%3A0%2C%22pg%22%3A1%2C%22pz%22%3A10%7D%7D');
                }
            },
            // Invocation 40: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10004/queryReceiveCalendarActivity?query=%7B%22activityId%22%3A%22qd_cash_store_calendar_1234545534716215296%22%7D');
                }
            },
            // Invocation 41: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('qdreader://app/openWebView?query=%7B%22actionUrl%22:%22https://h5.if.qidian.com/new/cash-store/detail?_viewmode=0&spuId=1234545534716215296%22%7D');
                }
            },
            // Invocation 42: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10015/preloadRewardVideo?query=%7B%22appId%22%3A1108248575%2C%22posId%22%3A%225000160377544627%22%2C%22adPositionCode%22%3A%22qd_flzx_buqian%22%7D');
                }
            },
            // Invocation 43: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10019/preloadRewardVideo?query=%7B%22appId%22%3A1108248575%2C%22posId%22%3A%228054520584600960%22%2C%22adPositionCode%22%3A%22qd_flzx_normaltask%22%7D');
                }
            },
            // Invocation 44: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://app:10001/showMore?query=%7B%22showShare%22%3Atrue%2C%22shareItem%22%3A%7B%22title%22%3A%22%E3%80%8A%E6%8B%A9%E5%A4%A9%E8%AE%B0%E3%80%8B%E5%8A%A8%E7%94%BB%E5%BC%80%E6%92%AD%E7%A6%8F%E5%88%A9%EF%BC%81%E9%80%9F%E9%A2%86%EF%BC%81%22%2C%22desc%22%3A%22%E5%85%A8%E8%AE%A2%E5%8D%B3%E5%BE%97%E5%85%8D%E8%B4%B9%E8%B5%A0%E4%B9%A6%E6%9D%83%E7%9B%8A%EF%BC%8C%E6%9B%B4%E6%9C%89%E6%83%8A%E5%96%9C%E5%A4%A7%E5%A5%96%E7%AD%89%E4%BD%A0%E6%9D%A5%E6%8A%BD%EF%BD%9E%22%2C%22imageUrl%22%3A%22https%3A%2F%2Fnoahqd.yuewen.com%2Fimage%2F2004a5ba2beb4d3e8d4118e466dae3f3.jpg%22%2C%22url%22%3A%22https%3A%2F%2Fataru.qidian.com%2Fnoah%2F323787763%3F_viewmode%3D0%26shareGuid%3DPODedH9on4eyQ4WHCn%252FTEg%253D%253D%22%2C%22type%22%3A5%2C%22channels%22%3A%221%2C2%2C3%2C5%22%2C%22bitmapUrl%22%3A%22%22%2C%22disableNativeAction%22%3Atrue%7D%2C%22showComplain%22%3Afalse%2C%22showAddress%22%3Afalse%2C%22otherItems%22%3A%5B%5D%7D');


                    // No Sensitive Key Word
                }
            },
            // Invocation 45: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://event/add?query=%7B%22name%22%3A%22browserTitleBarClick%22%7D');
                }
            },
            // Invocation 46: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://event/add?query=%7B%22name%22%3A%22browserVisibilityChange%22%7D');
                }
            },
            // Invocation 47: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://ui/setWebViewBounce?query=%7B%22bounce%22%3Afalse%7D');
                }
            },
            // Invocation 48: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://ui/exit');
                }
            },
            // Invocation 49: IFRAME type
            {
                type: "IFRAME",
                execute: function() {
                    sendIframeMsg('jsbridge://ui/keyboardWillShowBehavior?query=%7B%22behavior%22%3A0%7D');
                }
            }
        ];

        // Display total number of invocations
        document.getElementById('totalInvocations').textContent = ocCalls.length;

        // Get log container
        const executionLog = document.getElementById('executionLog');
        
        function executeAllInvocations() {
            executionLog.innerHTML = '';

            const totalCalls = ocCalls.length;
            const delay_interval_2 = 200;
            const send_finishsig_interval = (totalCalls - 1) * delay_interval_2 + 1000;

            ocCalls.forEach((call, index) => {
                const delay_interval = 200;
                const delay = index * delay_interval;
                
                setTimeout(() => {
                    try {
                        // Execute interface call
                        call.execute();

                        // Print execution log
                        const logItem = document.createElement('div');
                        logItem.className = 'execution-item';
                        logItem.textContent = `Executed invocation ${index + 1}/${ocCalls.length} (Type: ${call.type})`;
                        executionLog.appendChild(logItem);
                        console.log(`Executed call ${index + 1} (Type: ${call.type}) at ${delay}ms after trigger`);

                    } catch (error) {
                        console.error(`Error executing call ${index + 1}:`, error);
                    }
                }, delay);
            });

            // Send Finish signal to notify python script
            setTimeout(sendFinishSignal, send_finishsig_interval);
        }

        // Manual Trigger: Button click trigger
        document.getElementById('Trigger').addEventListener('click', function() {
            executeAllInvocations();
        });

        // Auto Trigger: specified (autotrigger_interval) seconds after page load completes
        window.onload = function() {
            const autotrigger_interval = 10;

            const tip = document.createElement('div');
            tip.className = 'execution-item';
            tip.style.color = '#888';
            tip.textContent = `Page loaded completely, will automatically trigger all invocations after ${autotrigger_interval} seconds (you can click the button to trigger manually in advance)...`;
            executionLog.appendChild(tip);
            
            // Auto-execute after specified delay
            setTimeout(executeAllInvocations, autotrigger_interval*1000);
        };
    </script>
</body>
</html>